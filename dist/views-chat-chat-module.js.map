{"version":3,"sources":["./src/app/views/chat/chat-contents/chat-contents.component.ts","./src/app/views/chat/chat-contents/chat-contents.component.html","./src/app/views/chat/chat/chat.component.ts","./src/app/views/chat/chat/chat.component.html","./src/app/shared/services/variables.service.ts","./src/app/views/chat/chat-left-sidebar/chat-left-sidebar.component.ts","./src/app/views/chat/chat-left-sidebar/chat-left-sidebar.component.html","./src/app/views/chat/chat.service.ts","./src/app/views/chat/chat.module.ts","./src/app/views/chat/chat-routing.module.ts"],"names":[],"mappings":"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","file":"views-chat-chat-module.js","sourcesContent":["import { Component, OnInit, ViewChild, ViewChildren, Input, OnDestroy } from '@angular/core';\nimport { PerfectScrollbarDirective } from 'ngx-perfect-scrollbar';\nimport { ChatService, ChatCollection, User, Chat } from '../chat.service';\nimport { NgForm } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { SharedAnimations } from 'src/app/shared/animations/shared-animations';\nimport { HttpService } from 'src/app/shared/services/http.service';\nimport { VariablesService } from 'src/app/shared/services/variables.service';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Component({\n  selector: 'app-chat-contents',\n  templateUrl: './chat-contents.component.html',\n  styleUrls: ['./chat-contents.component.scss'],\n  animations: [SharedAnimations]\n})\nexport class ChatContentsComponent implements OnInit, OnDestroy {\n  user: User = new User();\n  activeContact: User = new User();\n  public chatCollection: ChatCollection;\n\n  userUpdateSub: Subscription;\n  chatUpdateSub: Subscription;\n  chatSelectSub: Subscription;\n\n  @Input('matSidenav') matSidenav;\n  @ViewChild(PerfectScrollbarDirective) psContainer: PerfectScrollbarDirective;\n  @ViewChild('imageModal', { static: true }) imageModal;\n  @ViewChildren('msgInput') msgInput;\n  @ViewChild('msgForm') msgForm: NgForm;\n  incomingmsg = [];\n  messageList:  string[] = [];\n  msg = '';\n  userId;\n  reciever_id;\n  sendData;\n  historyData;\n  textForm;\n  userName;\n  message;\n  groupId;\n  chat_Obj;\n  loggeduser;\n  login_data\n  selectedFile:File = null;\n  url:any = '';\n  color:string = 'red';\n  img:any = '';\n  fileUrl;\n  constructor(public chatService: ChatService, \n    private service: HttpService,\n    private sanitizer: DomSanitizer,\n    private modalService: NgbModal,\n    public variable: VariablesService) { }\n\n  ngOnInit() {\n    this.userId = JSON.parse(localStorage.getItem('userId'));\n    this.loggeduser = JSON.parse(localStorage.getItem('loggeduser'));\n    this.login_data = JSON.parse(localStorage.getItem('loginData'));\n\n    this.service.currentMessage.subscribe(message => {\n       this.message = (message) ? message : ''\n       this.userChat();\n    })\n    \n    this.service\n      .getMessages()\n      .subscribe((res: string) => {\n        this.messageList.push(res);\n        this.scrollToBottom();\n      });\n\n   }\n\n  ngOnDestroy() {\n    if (this.userUpdateSub) { this.userUpdateSub.unsubscribe(); }\n    if (this.chatSelectSub) { this.chatSelectSub.unsubscribe(); }\n    if (this.chatUpdateSub) { this.chatUpdateSub.unsubscribe(); }\n  }\n\n  /*==========Single Image Function Start Here========*/\n  onSingleFileChange(event){ \n    this.selectedFile = <File>event.target.files[0];\n    const formData: any = new FormData();\n    formData.append('file', this.selectedFile);\n    this.service.getSingleImage(formData).subscribe(res => {\n      console.log(\"imagesssssssssss\",res);\n      if(res['status']==1){\n        this.service.sendMessage(res['data'],this.userId,this.message.id,this.message.group_id,'image');  \n      }\n\n    })\n  }\n  /*==========Single Image Function End Here========*/\n\n\n  userChat(){\n    this.service.getUserChat(this.userId,this.message.group_id)  \n    .subscribe(res => {\n      if(res['status'] == 1){\n        this.chat_Obj = res['data'];\n        this.messageList=this.chat_Obj;\n        \n      } else{\n         this.messageList=[];\n      }\n    });\n  }\n  \n  singleImageUpload(){\n    console.log(\"imagesss file\",this.selectedFile);\n    \n  }\n\n\n  message_send(e) {\n    console.log(e);\n    this.textForm = this.msgForm.form.value.message;\n    if(this.textForm!='' && this.textForm!=undefined && this.textForm!=null){\n      this.service.sendMessage(this.textForm,this.userId,this.message.id,this.message.group_id,'text');\n    }\n    this.msgForm.form.reset();\n  }\n\n\n  initMsgForm() {\n    setTimeout(() => {\n      this.msgForm.reset();\n      this.msgInput.first.nativeElement.focus();\n      this.scrollToBottom();\n    });\n  }\n\n  scrollToBottom() {\n    setTimeout(() => {\n      this.psContainer.update();\n      this.psContainer.scrollToBottom(0, 400);\n    });\n  }\n\n  changeStyle(e){\n   console.log(\"ppppppp\");\n  \n  }\n\n  downloadUrl(url: string, fileName: string) {\n    const a: any = document.createElement('a');\n    console.log(a);\n    a.href = url;\n    console.log(url);\n    a.click();\n    a.download = url;\n    //a.target=\"_self\"\n    document.body.appendChild(a);\n    a.style = 'display: none';\n    \n  }\n  imgview(e:string){ \n    console.log(\"images\",e);\n    window.open(e); \n  }\n}\n","<div>\n  <div class=\"d-flex pl-3 pr-3 pt-2 pb-2 o-hidden box-shadow-1 chat-topbar\">\n    <a appSidebarToggler=\"chat-sidebar\" class=\"link-icon d-md-none\">\n      <i class=\"icon-regular i-Right ml-0 mr-3\"></i>\n    </a>\n    <div class=\"d-flex align-items-center\" *ngIf=\"variable.user_chat_img\">\n      <img src=\"http://192.168.0.4:3300/user/{{message.profile_img}}\" \n      class=\"avatar-sm rounded-circle mr-2\">\n      <p class=\"m-0 text-title text-16 flex-grow-1\">{{message?.name}}</p>\n    </div>\n  </div>\n\n  <div [perfectScrollbar]=\"{suppressScrollX: true}\" class=\"chat-content rtl-ps-none\" *ngIf=\"variable.loadingCollection\">\n    <div *ngFor=\"let chat of messageList\" class=\"mb-4\">\n\n      <div *ngIf=\"chat.senderId == userId\">\n        <div class=\"d-flex user\">\n\n          <img src=\"http://192.168.0.4:3300/user/{{login_data.profile_img}}\" class=\"avatar-sm rounded-circle mr-3\">\n          <div class=\"message flex-grow-1\">\n            \n            <div class=\"d-flex\">\n              <p class=\"mb-1 text-title text-16 flex-grow-1\">{{loggeduser}}</p>\n              <span class=\"text-small text-muted\">{{chat.sendTimestamp * 1000 | date}}</span>\n            </div>\n             <p class=\"m-0\" *ngIf=\"chat.msgType=='text'\">{{chat.msg}}</p>\n             <div class=\"images\">\n             <p class=\"m-0\" *ngIf=\"chat.msgType=='image'\">\n               <img src=\"{{chat.msg}}\" class=\"zoom mr-3\" id=\"show\" style=\"width:100px; height:100px;\"></p>\n               <div class=\"overlay\">\n                <a *ngIf=\"chat.msgType !='text'\" class=\"icon\">\n                    <i class=\"i-Download\" title=\"Download Image\" (click)=\"downloadUrl(chat.msg)\">\n                   </i>  \n                   <span class=\"ml-2\">\n                    <a  href=\"#\" target=\"_blank\">\n                    <i class=\"i-Information\" title=\"View Image\" (click)=\"imgview(chat.msg)\"></i>\n                    </a>\n                  </span>\n                </a>\n                </div>\n              </div>\n          </div>\n        </div>\n       </div> \n      <br>\n      <div *ngIf=\"chat.senderId == message.id\">\n      <div class=\"d-flex\">\n        <!-- <div class=\"d-flex\"> -->\n\n        <div class=\"message flex-grow-1\">\n          <div class=\"d-flex\">\n            <p class=\"mb-1 text-title text-16 flex-grow-1\">{{message?.name}}</p>\n            <span class=\"text-small text-muted\">{{chat.sendTimestamp * 1000 | date}}</span>\n          </div>\n          <!-- <p class=\"m-0\">{{chat.msg}}</p> -->\n\n          <p class=\"m-0\" *ngIf=\"chat.msgType=='text'\">{{chat.msg}}</p>\n          <div class=\"images\">\n          <p class=\"m-0\" *ngIf=\"chat.msgType=='image'\" >\n            <img  src=\"{{chat.msg}}\" class=\"mr-3\" style=\"width:100px; height:100px;\"></p>\n            <div class=\"overlay\">\n              <a *ngIf=\"chat.msgType !='text'\" class=\"icon\" title=\"User Profile\">\n                <a [href]=\"chat.msg\" target=\"_self\" download=\"image\"><i class=\"i-Download\" (click)=\"download(chat)\">\n                 </i> </a>\n                <span class=\"ml-2\"><i class=\"i-Information\" (click)=\"imgview(chat,imageModal)\"></i>\n                </span>\n              </a>\n              </div>\n          </div>\n        </div>\n        <img src=\"http://192.168.0.4:3300/user/{{message.profile_img}}\" class=\"avatar-sm rounded-circle ml-3\">\n      </div>\n    </div>\n    </div>\n  </div>\n\n\n  <div class=\"pl-3 pr-3 pt-3 pb-3 box-shadow-1 chat-input-area\" *ngIf=\"variable.loadingCollection\">\n    <form #msgForm=\"ngForm\" class=\"inputForm\">\n      <div class=\"form-group\">\n        <textarea class=\"form-control form-control-rounded\" #msgInput ngModel placeholder=\"Type your message\"\n          name=\"message\" id=\"message\" cols=\"30\" rows=\"3\"></textarea>\n      </div>\n      <div class=\"d-flex\">\n        <div class=\"flex-grow-1\"></div>\n        <button type=\"button\" (click)=\"message_send($event)\" (keyup.enter)=\"message_send($event)\" class=\"btn btn-icon btn-rounded btn-primary mr-2\">\n          <i class=\"i-Paper-Plane\"></i>\n        </button>\n        <!-- <button class=\"btn btn-icon btn-rounded btn-outline-primary\"> -->\n        <div class=\"image-upload\">\n          <label for=\"file-input\">\n            <div class=\"btn btn-icon btn-rounded btn-outline-primary\">\n            <i class=\"i-Add-File\"></i>\n          </div>\n          </label>\n      \n          <input id=\"file-input\" type=\"file\" (change)=\"onSingleFileChange($event)\"/>\n      </div>\n      <!-- </button> -->\n        <!-- <button class=\"btn btn-icon btn-rounded btn-outline-primary\"  >\n          <input type=\"file\" (change)=\"onSingleFileChange($event)\">\n          <i class=\"i-Add-File\"></i>\n        </button> -->\n      </div>\n    </form>\n  </div>\n\n  <div class=\"spinner-glow spinner-glow-warning\" *ngIf=\"!variable.loadingCollection\"></div>\n\n  <div class=\"app-inro-circle\" *ngIf=\"!variable.loadingCollection\">\n    <div class=\"border rounded-circle big-bubble\"\n      [@animate]=\"{value:'*',params:{scale:'.2',delay:'400ms', duration: '400ms'}}\">\n      <i class=\"i-Speach-Bubbles\"></i>\n    </div>\n    <p class=\"text-16\" [@animate]=\"{value:'*',params:{y:'120px',delay:'600ms', duration: '400ms'}}\">Select a contact and\n      start chat.</p>\n  </div>\n\n</div>\n\n<ng-template #imageModal let-modal>\n  <div class=\"modal-header\">\n      <!-- <h4 class=\"modal-title\" id=\"modal-title\">Alert</h4> -->\n\n      <button type=\"button\" class=\"close\" aria-label=\"Close button\" aria-describedby=\"modal-title\" (click)=\"modal.dismiss('Cross click')\">\n          <span aria-hidden=\"true\">&times;</span>\n      </button>\n  </div>\n  <div class=\"modal-body\">\n    <img src=\"{{img}}\" class=\"zoom mr-3\" style=\"width:473px; height:300px;\">\n  <!-- </p> -->\n      <!-- <p><strong>Are you sure? you want to delete language.</strong></p> -->\n  </div>\n  \n</ng-template>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.scss']\n})\nexport class ChatComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<div appSidebarContainer class=\"card chat-sidebar-container\">\n  <div appSidebarContent class=\"chat-content-wrap\">\n    <app-chat-contents></app-chat-contents>\n  </div>\n  <div appSidebar=\"chat-sidebar\" class=\"chat-sidebar-wrap\">\n    <app-chat-left-sidebar></app-chat-left-sidebar>\n  </div>\n</div>","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class VariablesService {\n  public actionType; /*------Add Edit Type Data variable------*/\n  public loadingCollection = false;\n  public user_chat_img = false;\n \n  constructor() { }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { User, ChatService } from '../chat.service';\nimport { HttpService } from \"../../../shared/services/http.service\";\nimport { Router } from '@angular/router';\nimport { VariablesService } from 'src/app/shared/services/variables.service';\n\n@Component({\n  selector: 'app-chat-left-sidebar',\n  templateUrl: './chat-left-sidebar.component.html',\n  styleUrls: ['./chat-left-sidebar.component.scss']\n})\nexport class ChatLeftSidebarComponent implements OnInit {\n\n  userUpdateSub: Subscription;\n  loadDataSub: Subscription;\n\n  isSidenavOpen = true;\n  userId;\n  contact_Obj;\n  group_id;\n  currentUser: User = new User();\n  contacts: any[];\n  login_data;\n  constructor(private chatService: ChatService,public service: HttpService,private router: Router,public variable:VariablesService\n    ) {}\n\n  ngOnInit() {\n    this.login_data = JSON.parse(localStorage.getItem('loginData'));\n\n    this.userId = JSON.parse(localStorage.getItem('userId'));\n    this.getContactList();\n  }\n\n\n  getContactList(){\n    this.service.getContactData(this.userId)  \n    .subscribe(res => {\n      if(res['status'] == 1){\n        this.contacts= res['data'];\n      }        \n    });\n  }\n\n\n  getChatByContact(contact) {\n    this.variable.user_chat_img=true;\n    console.log(\"select contact\",contact);\n\n    this.variable.loadingCollection = true;\n    this.service.changeMessage(contact);\n    \n    if(contact.group_id =='0'){\n      console.log(\"group_id\",contact.group_id)  \n      // send request\n        this.service.requestSend(this.userId,contact.id).subscribe(res => {\n         if(res['status'] == 1){\n          this.getContactList();  \n         }\n      })\n    }\n\n   \n  }\n}\n","<div class=\"border-right\">\n  <!-- <div class=\"pt-2 pb-2 pl-3 pr-3 d-flex align-items-center o-hidden box-shadow-1 chat-topbar\">\n    <a appSidebarToggler=\"chat-sidebar\" class=\"link-icon d-md-none\">\n      <i class=\"icon-regular ml-0 mr-3 i-Left\"></i> \n    </a>\n    <div class=\"form-group m-0 flex-grow-1\">\n      <input type=\"text\" class=\"form-control form-control-rounded\" id=\"search\" placeholder=\"Search contacts\">\n    </div>\n    \n  </div>\n   -->\n  <div [perfectScrollbar]=\"{suppressScrollX: true}\" class=\"contacts-scrollable rtl-ps-none\">\n    <!-- <div class=\"mt-4 pb-2 pl-3 pr-3 font-weight-bold text-muted border-bottom\">Recent</div> -->\n    <!-- <div *ngFor=\"let info of currentUser?.chatInfo; let i = index\" \n    class=\"p-3 d-flex align-items-center contact\"\n    [ngClass]=\"{\n      'border-bottom': i != currentUser?.chatInfo.length - 1, \n      'online': (contacts | getValueByKey:info.contactId:'status') === 'online'\n    }\"\n    (click)=\"getChatByContact(info.contactId)\">\n        <img [src]=\"contacts | getValueByKey:info.contactId:'avatar'\" \n        class=\"avatar-sm rounded-circle mr-3\" alt=\"\">\n        <div>\n            <h6 class=\"m-0\">{{info.contactName}}</h6>\n            <span class=\"text-muted text-small\">{{info.lastChatTime  | date}}</span>\n        </div>\n    </div> -->\n    <div class=\"mt-3 pb-2 pl-3 pr-3 font-weight-bold text-muted border-bottom\">Contacts</div>\n    <div *ngFor=\"let contact of contacts\" \n    class=\"p-3 d-flex border-bottom align-items-center\"\n    [ngClass]=\"{online: contact.status === 'online'}\"\n    (click)=\"getChatByContact(contact)\">\n    <!-- assets/images/faces/13.jpg -->\n\n    \n    \n    <!-- <img src=\"http://192.168.0.69:3300/image-1607931780514.png\" alt=\"\" class=\"avatar-sm rounded-circle mr-3\">\n      <h6 class=\"\">{{contact.name}}</h6>\n    </div> -->\n\n     <img src=\"http://192.168.0.4:3300/user/{{contact.profile_img}}\" alt=\"\" class=\"avatar-sm rounded-circle mr-3\">\n      <h6 class=\"\">{{contact.name}}</h6>\n    </div> \n  </div>\n  \n</div>","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, BehaviorSubject, Subject, of, combineLatest } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\n\nexport interface Chat {\n  text: string;\n  time: Date | string;\n  contactId: User['id'];\n}\n\nexport interface ChatCollection {\n  id: string;\n  chats: Chat[];\n}\n\nexport interface UserChatInfo {\n  chatId: ChatCollection['id'];\n  contactId: User['id'];\n  contactName: User['name'];\n  unread: number;\n  lastChatTime: Date | string;\n}\n\nexport class User {\n  id: string;\n  avatar: string;\n  name: string;\n  status: string;\n  chatInfo?: UserChatInfo[];\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChatService {\n  public contacts: User[];\n  public chats: ChatCollection[];\n  public user: User;\n\n  onContactSelected = new BehaviorSubject<any>(null);\n  onUserUpdated = new Subject<User>();\n\n  onChatSelected = new BehaviorSubject<any>(null);\n  onChatsUpdated = new Subject<any>();\n  loadingCollection: boolean;\n\n  constructor(private http: HttpClient) {\n\n  }\n\n  loadChatData(): Observable<any> {\n    return combineLatest(\n      this.getAllContacts(),\n      this.getAllChats(),\n      this.getCurrentUser(),\n      (contacts, chats, user) => {\n        this.contacts = contacts;\n        this.chats = chats;\n        this.user = user;\n        // console.log('next.willCall')\n        this.onUserUpdated.next(user);\n        // console.log('next.called')\n        // console.log(\n        //   \"contacts:\",\n        //   contacts,\n        //   \"\\n chats:\",\n        //   chats,\n        //   \"\\n currUser:\",\n        //   user\n        // );\n      }\n    );\n  }\n  public getChatByContact(contactId): Observable<ChatCollection> {\n    this.loadingCollection = true;\n    const chatInfo = this.user.chatInfo.find(chat => chat.contactId === contactId);\n\n    if (!chatInfo) {\n      return this.createChatCollection(contactId)\n        .pipe(switchMap(chatColl => {\n          return this.getChatByContact(contactId);\n        }));\n    }\n\n    return this.getAllChats()\n      .pipe(switchMap(chats => {\n        const chatCollection = chats.find(chat => chat.id === chatInfo.chatId);\n        const contact = this.contacts.find(\n          contact => contact.id === contactId\n        );\n\n        this.onChatSelected.next({\n          chatCollection: chatCollection,\n          contact: contact\n        });\n        this.loadingCollection = false;\n        return of(chatCollection);\n      }));\n  }\n\n  createChatCollection(contactId) {\n\n    const contact = this.contacts.find(contact => contact.id === contactId);\n    const chatId = (Math.random() * 1000000000).toString();\n\n    const chatCollection: ChatCollection = {\n      id: chatId,\n      chats: []\n    };\n\n    const chatInfo = {\n      chatId: chatId,\n      lastChatTime: new Date(),\n      contactId: contact.id,\n      contactName: contact.name,\n      unread: null\n    };\n\n    return this.http\n      .post('api/chat-collections', {...chatCollection})\n      .pipe(switchMap(updatedChatCollection => {\n\n        this.user.chatInfo.push(chatInfo);\n        return this.updateUser(this.user)\n          .pipe(switchMap((res) => {\n\n            return this.getCurrentUser()\n              .pipe(map(user => {\n                this.user = user;\n                // console.log(user)\n                this.onUserUpdated.next(user);\n              }));\n\n            // return updatedChatCollection\n          }));\n\n      }));\n  }\n\n  getAllContacts(): Observable<User[]> {\n    return this.http.get<User[]>('api/contacts');\n  }\n  getAllChats(): Observable<ChatCollection[]> {\n    return this.http.get<ChatCollection[]>('api/chat-collections');\n  }\n  getCurrentUser(): Observable<User> {\n    return this.http.get<User>('api/chat-user')\n      .pipe(map(res => res[0]));\n  }\n  updateUser(user: User): Observable<User> {\n    return this.http.put<User>(`api/chat-user/${user.id}`, {...user});\n  }\n  updateChats(chatId: string, chats: Chat[]): Observable<ChatCollection> {\n    const chatCollection: ChatCollection = {\n      id: chatId,\n      chats: chats\n    };\n    return this.http.put<ChatCollection>('api/chat-collections', chatCollection);\n  }\n\n  autoReply(chat) {\n    setTimeout(() => {\n      this.onChatsUpdated.next(chat);\n    }, 1500);\n  }\n\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ChatRoutingModule } from './chat-routing.module';\nimport { ChatComponent } from './chat/chat.component';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { ChatLeftSidebarComponent } from './chat-left-sidebar/chat-left-sidebar.component';\nimport { ChatContentsComponent } from './chat-contents/chat-contents.component';\nimport { PerfectScrollbarModule } from 'ngx-perfect-scrollbar';\nimport { FormsModule } from '@angular/forms';\nimport { SharedDirectivesModule } from 'src/app/shared/directives/shared-directives.module';\nimport { SharedPipesModule } from 'src/app/shared/pipes/shared-pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedDirectivesModule,\n    SharedPipesModule,\n    FormsModule,\n    PerfectScrollbarModule,\n    ChatRoutingModule\n  ],\n  declarations: [ChatComponent, ChatLeftSidebarComponent, ChatContentsComponent]\n})\nexport class ChatModule { }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ChatComponent } from './chat/chat.component';\n\nconst routes: Routes = [\n  {\n    path: 'chat',\n    component: ChatComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ChatRoutingModule { }\n"],"sourceRoot":"webpack:///"}